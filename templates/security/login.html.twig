{% extends 'base.html.twig' %}

{% block title %}Connexion{% endblock %}

{% block body %}
<h1 class="text-3xl text-center my-4">Connexion</h1>

<form method="post" class="bg-gray-800 p-5 mx-auto my-6 rounded-xl w-4/5 md:w-2/5 shadow-xl flex flex-col gap-3">
    {% if error %}
        <div class="alert alert-danger">{{ error.messageKey|trans(error.messageData, 'security') }}</div>
    {% endif %}

    {% if app.user %}
        <div class="mb-3 text-white flex flex-col gap-2 justify-center items-center">
            <p>Vous êtes connecté en tant que</p>
            <p class="font-bold text-xl">{{ app.user.userIdentifier }}</p>
            <a href="{{ path('app_logout') }}" class="btn mt-4 bg-sky-400 border-0">Se déconnecter</a>
        </div>

    {% else %}
        <label for="username" class="text-white font-bold text-lg">Identifiant</label>
        <input type="text" value="{{ last_username }}" name="_username" id="username" class="form-control rounded p-2" autocomplete="username" required autofocus>
        <label for="password" class="text-white font-bold text-lg">Mot de passe</label>
        <input type="password" name="_password" id="password" class="form-control rounded p-2" autocomplete="current-password" required>

        <input type="hidden" name="_csrf_token"
                value="{{ csrf_token('authenticate') }}"
        >
        <input type="hidden" name="_target_path" value="/">


        <button class="btn mt-4 bg-sky-400 border-0" type="submit">
            Se connecter
        </button>
    {% endif %}
</form>

{% endblock %}
